<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø´Ø§Ù‡Ø¯Ø© - SHASHAFLIX</title>
    <link rel="stylesheet" href="style.css">
    <style>
        body { overflow-x: hidden; }
        .watch-container { display: flex; flex-wrap: wrap; height: calc(100vh - 70px); padding-top: 70px; }
        
        /* Ù‚Ø³Ù… Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙˆØ§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª */
        .main-content { flex: 3; background: #000; display: flex; flex-direction: column; }
        .video-wrapper { position: relative; width: 100%; padding-top: 56.25%; /* 16:9 Aspect Ratio */ }
        .video-player { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; }
        
        /* ØªØµÙ…ÙŠÙ… Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª */
        .servers-list { padding: 15px; background: #111; border-bottom: 1px solid #333; display: flex; gap: 10px; overflow-x: auto; align-items: center; }
        .server-label { color: #fff; margin-left: 10px; font-weight: bold; }
        .server-btn { 
            padding: 8px 15px; 
            background: #333; 
            color: white; 
            border: 1px solid #555; 
            border-radius: 4px; 
            cursor: pointer; 
            transition: 0.3s;
            white-space: nowrap;
        }
        .server-btn:hover, .server-btn.active { background: var(--primary-color); color: black; border-color: var(--primary-color); }

        /* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© */
        .episodes-section { flex: 1; background: #1f1f1f; border-right: 1px solid #333; min-width: 300px; display: flex; flex-direction: column; }
        .season-selector { padding: 20px; background: #141414; }
        .season-selector select { width: 100%; padding: 10px; background: #333; color: white; border: none; border-radius: 5px; }
        .episodes-list { flex-grow: 1; overflow-y: auto; padding: 10px; }
        .episode-item { display: flex; padding: 10px; margin-bottom: 10px; background: #2a2a2a; border-radius: 5px; cursor: pointer; }
        .episode-item:hover, .episode-item.active { background: #00BFFF; color: black; }
        .episode-info h4 { margin: 0; font-size: 14px; }

        /* Ù„Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ */
        @media (max-width: 768px) {
            .watch-container { height: auto; flex-direction: column; }
            .main-content { height: auto; }
            .episodes-section { height: 500px; }
        }
    </style>
</head>
<body>

    <header class="navbar">
        <div class="navbar-brand">
            <img src="hero-logo.png" alt="SHASHAFLIX" style="height: 40px; vertical-align: middle;">
        </div>
        <div class="nav-account"><a href="index.html" class="btn btn-secondary">âœ Ø¹ÙˆØ¯Ø©</a></div>
    </header>

    <div class="watch-container">
        <div class="main-content">
            <div class="video-wrapper">
                <iframe id="main-player" class="video-player" src="" allowfullscreen></iframe>
            </div>
            <div class="servers-list" id="servers-container">
                <span class="server-label">Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª:</span>
                <span style="color:gray; font-size:12px;">Ø§Ø®ØªØ± Ø­Ù„Ù‚Ø© Ø£ÙˆÙ„Ø§Ù‹</span>
            </div>
        </div>

        <div class="episodes-section">
            <div class="season-selector">
                <select id="season-select" onchange="changeSeason(this.value)"></select>
            </div>
            <div class="episodes-list" id="episodes-container"></div>
        </div>
    </div>

    <script>
        // ====================================================
        // ğŸŸ¢ Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: Ù„Ø§Ø­Ø¸ ÙƒÙŠÙ Ù†Ø¶Ø¹ Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª Ø§Ù„Ø¢Ù†
        // ====================================================
        
        const allSeries = {
            // ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø§Ù„Ø§Ø³Ù… Ù‡Ù†Ø§ Ù‡Ùˆ Ù†ÙØ³ ID Ø§Ù„Ù…Ø³Ù„Ø³Ù„ ÙÙŠ ÙØ§ÙŠØ±Ø¨ÙŠØ³
            "Boku No Hero": { 
                "1": [ // Ø§Ù„Ù…ÙˆØ³Ù… 1
                    { 
                        title: "Ø§Ù„Ø­Ù„Ù‚Ø© 1: Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©", 
                        // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª Ù„Ù‡Ø°Ù‡ Ø§Ù„Ø­Ù„Ù‚Ø©
                        servers: [
                            { name: "Ø³ÙŠØ±ÙØ± 1 (Ø±Ø¦ÙŠØ³ÙŠ)", url: "https://www.youtube.com/embed/DkLjq4C_k8c" },
                            { name: "Ø³ÙŠØ±ÙØ± 2 (Ø§Ø­ØªÙŠØ§Ø·ÙŠ)", url: "https://www.youtube.com/embed/VIDEO_ID_2" },
                            { name: "Ø³ÙŠØ±ÙØ± 4K", url: "https://www.youtube.com/embed/VIDEO_ID_3" }
                        ]
                    },
                    { 
                        title: "Ø§Ù„Ø­Ù„Ù‚Ø© 2: Ø§Ù„Ø£Ø¨Ø·Ø§Ù„", 
                        servers: [
                            { name: "Ø³ÙŠØ±ÙØ± Ø³Ø±ÙŠØ¹", url: "https://www.youtube.com/embed/VIDEO_ID_4" }
                        ]
                    }
                ],
                "2": [ // Ø§Ù„Ù…ÙˆØ³Ù… 2
                    { 
                        title: "Ø§Ù„Ø­Ù„Ù‚Ø© 1", 
                        servers: [
                            { name: "Ø³ÙŠØ±ÙØ± Ù…Ø´Ø§Ù‡Ø¯Ø©", url: "https://www.youtube.com/embed/..." }
                        ]
                    }
                ]
            }
        };

        // ====================================================
        // ğŸ›‘ Ø§Ù„Ù…Ù†Ø·Ù‚ Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠ
        // ====================================================

        const urlParams = new URLSearchParams(window.location.search);
        const seriesId = urlParams.get('id'); 
        const player = document.getElementById('main-player');
        const episodesContainer = document.getElementById('episodes-container');
        const serversContainer = document.getElementById('servers-container');
        const seasonSelect = document.getElementById('season-select');

        let currentSeriesData = allSeries[seriesId];

        if (currentSeriesData) {
            const seasons = Object.keys(currentSeriesData);
            seasons.forEach(s => {
                seasonSelect.innerHTML += `<option value="${s}">Ø§Ù„Ù…ÙˆØ³Ù… ${s}</option>`;
            });
            changeSeason(seasons[0]);
        } else {
            episodesContainer.innerHTML = "<p style='color:white; padding:20px'>Ø§Ù„Ø­Ù„Ù‚Ø§Øª ØºÙŠØ± Ù…ØªÙˆÙØ±Ø© Ø­Ø§Ù„ÙŠØ§Ù‹ Ø£Ùˆ Ø§Ù„Ù€ ID ØºÙŠØ± Ù…Ø·Ø§Ø¨Ù‚.</p>";
        }

        function changeSeason(season) {
            episodesContainer.innerHTML = "";
            const episodes = currentSeriesData[season];
            
            episodes.forEach((ep, index) => {
                const div = document.createElement('div');
                div.className = 'episode-item';
                div.innerHTML = `<div class="episode-info"><h4>${ep.title}</h4></div>`;
                
                div.onclick = () => {
                    // 1. ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø­Ù„Ù‚Ø© Ø§Ù„Ù†Ø´Ø·Ø©
                    document.querySelectorAll('.episode-item').forEach(e => e.classList.remove('active'));
                    div.classList.add('active');
                    
                    // 2. Ø¹Ø±Ø¶ Ø³ÙŠØ±ÙØ±Ø§Øª Ù‡Ø°Ù‡ Ø§Ù„Ø­Ù„Ù‚Ø©
                    loadServers(ep.servers);
                };
                episodesContainer.appendChild(div);
            });

            // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø­Ù„Ù‚Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
            if(episodes.length > 0) {
                episodesContainer.children[0].click();
            }
        }

        function loadServers(servers) {
            serversContainer.innerHTML = '<span class="server-label">Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª:</span>';
            
            servers.forEach((server, index) => {
                const btn = document.createElement('button');
                btn.className = 'server-btn';
                btn.innerText = server.name;
                
                btn.onclick = () => {
                    player.src = server.url;
                    document.querySelectorAll('.server-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                };

                serversContainer.appendChild(btn);

                // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø³ÙŠØ±ÙØ± Ø§Ù„Ø£ÙˆÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
                if(index === 0) btn.click();
            });
        }
    </script>

</body>
</html>
