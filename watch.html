<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø´Ø§Ù‡Ø¯Ø© - SHASHAFLIX</title>
    <link rel="stylesheet" href="style.css">
    <style>
        body { overflow-x: hidden; }
        .watch-container { display: flex; flex-wrap: wrap; height: calc(100vh - 70px); padding-top: 70px; }
        .main-content { flex: 3; background: #000; display: flex; flex-direction: column; justify-content: center; }
        .video-wrapper { position: relative; width: 100%; height: 100%; }
        .video-player { width: 100%; height: 100%; border: none; }
        .episodes-section { flex: 1; background: #1f1f1f; border-right: 1px solid #333; min-width: 300px; display: flex; flex-direction: column; }
        .season-selector { padding: 20px; background: #141414; }
        .season-selector select { width: 100%; padding: 10px; background: #333; color: white; border: none; border-radius: 5px; font-size: 16px; }
        .episodes-list { flex-grow: 1; overflow-y: auto; padding: 10px; }
        .episode-item { display: flex; padding: 15px; margin-bottom: 5px; background: #2a2a2a; border-radius: 5px; cursor: pointer; transition: 0.2s; align-items: center; }
        .episode-item:hover { background: #333; }
        .episode-item.active { background: var(--primary-color); color: black; font-weight: bold; }
        .episode-info h4 { margin: 0; font-size: 14px; }
        @media (max-width: 768px) { .watch-container { height: auto; flex-direction: column; } .main-content { height: 40vh; } .episodes-section { height: 60vh; } }
    </style>
</head>
<body>

    <header class="navbar">
        <div class="navbar-brand">
            <img src="hero-logo.png" alt="SHASHAFLIX" style="height: 40px; vertical-align: middle;">
        </div>
        <div class="nav-account"><a href="index.html" class="btn btn-secondary">âœ Ø¹ÙˆØ¯Ø©</a></div>
    </header>

    <div class="watch-container">
        <div class="main-content">
            <div class="video-wrapper">
                <iframe id="main-player" class="video-player" src="" allow="autoplay; fullscreen" allowfullscreen></iframe>
            </div>
        </div>
        <div class="episodes-section">
            <div class="season-selector">
                <select id="season-select" onchange="changeSeason(this.value)"></select>
            </div>
            <div class="episodes-list" id="episodes-container"></div>
        </div>
    </div>

    <script>
        // ====================================================
        // ğŸŸ¢ Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙŠØ¯ÙˆÙŠ: Ù‡Ù†Ø§ ØªØ¶Ø¹ Ø§Ù„Ø­Ù„Ù‚Ø§Øª
        // ====================================================
        
        const allSeries = {
            // ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ù‡Ø°Ø§ Ø§Ù„Ø§Ø³Ù… Ù‡Ùˆ Ù†ÙØ³ Ø§Ù„Ù€ ID Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Firebase Ø¨Ø§Ù„Ø¶Ø¨Ø·
            // Ù…Ø«Ø§Ù„: Ø¥Ø°Ø§ ÙƒØ§Ù† ID Ø§Ù„Ù…Ø³Ù„Ø³Ù„ ÙÙŠ ÙØ§ÙŠØ±Ø¨ÙŠØ³ Ù‡Ùˆ "Dexter_S1"ØŒ Ø§ÙƒØªØ¨Ù‡ Ù‡Ù†Ø§ ÙƒÙ…Ø§ Ù‡Ùˆ
            
            "Ù‡Ù†Ø§_Ø¶Ø¹_Ø§ÙŠØ¯ÙŠ_Ø§Ù„Ù…Ø³Ù„Ø³Ù„_Ù…Ù†_ÙØ§ÙŠØ±Ø¨ÙŠØ³": { 
                "1": [ // Ø§Ù„Ù…ÙˆØ³Ù… 1
                    { title: "Ø§Ù„Ø­Ù„Ù‚Ø© 1", url: "https://www.youtube.com/embed/VIDEO_ID" },
                    { title: "Ø§Ù„Ø­Ù„Ù‚Ø© 2", url: "https://www.youtube.com/embed/VIDEO_ID" }
                ],
                "2": [ // Ø§Ù„Ù…ÙˆØ³Ù… 2
                    { title: "Ø§Ù„Ø­Ù„Ù‚Ø© 1", url: "https://www.youtube.com/embed/VIDEO_ID" }
                ]
            },

            // Ù…Ø«Ø§Ù„ Ù„Ù…Ø³Ù„Ø³Ù„ Ø¢Ø®Ø±
            "Another_Series_ID": { 
                "1": [
                    { title: "Ø§Ù„Ø­Ù„Ù‚Ø© 1", url: "..." }
                ]
            }
        };

        // ====================================================
        // ğŸ›‘ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠ (Ù„Ø§ ØªØ¹Ø¯Ù„ Ø´ÙŠØ¦Ø§Ù‹ Ù‡Ù†Ø§)
        // ====================================================

        const urlParams = new URLSearchParams(window.location.search);
        const seriesId = urlParams.get('id'); 
        
        const player = document.getElementById('main-player');
        const episodesContainer = document.getElementById('episodes-container');
        const seasonSelect = document.getElementById('season-select');

        let currentSeriesData = allSeries[seriesId];

        if (currentSeriesData) {
            // Ù…Ù„Ø¡ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø§Ù„Ù…ÙˆØ§Ø³Ù…
            const seasons = Object.keys(currentSeriesData);
            seasonSelect.innerHTML = "";
            seasons.forEach(s => {
                seasonSelect.innerHTML += `<option value="${s}">Ø§Ù„Ù…ÙˆØ³Ù… ${s}</option>`;
            });
            
            // ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…ÙˆØ³Ù… Ø§Ù„Ø£ÙˆÙ„
            changeSeason(seasons[0]);
        } else {
            episodesContainer.innerHTML = "<p style='color:white; padding:20px; text-align:center;'>Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø§Ù„Ø­Ù„Ù‚Ø§Øª ØºÙŠØ± Ù…Ø¶Ø§ÙØ© ÙÙŠ Ø§Ù„ÙƒÙˆØ¯ Ù„Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³Ù„Ø³Ù„.</p>";
        }

        function changeSeason(season) {
            episodesContainer.innerHTML = "";
            const episodes = currentSeriesData[season];
            
            if (episodes && episodes.length > 0) {
                episodes.forEach((ep) => {
                    const div = document.createElement('div');
                    div.className = 'episode-item';
                    div.innerHTML = `<div class="episode-info"><h4>${ep.title}</h4></div>`;
                    
                    div.onclick = () => {
                        const videoUrl = ep.url.includes('?') ? `${ep.url}&autoplay=1` : `${ep.url}?autoplay=1`;
                        player.src = videoUrl;
                        document.querySelectorAll('.episode-item').forEach(e => e.classList.remove('active'));
                        div.classList.add('active');
                    };
                    episodesContainer.appendChild(div);
                });
                // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø­Ù„Ù‚Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰
                episodesContainer.children[0].click();
            } else {
                episodesContainer.innerHTML = "<p style='color:gray; text-align:center;'>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ù„Ù‚Ø§Øª.</p>";
            }
        }
    </script>

</body>
</html>
